<html>
  <head>
    <title>Javascript-Android Communication</title>
  </head>
	  <body>
		  <a href="https://halodoc.onelink.me/P71V/962abafe">Corona doctor test</a>
		  <br><a href="https://halodoc.onelink.me/cQvV/1285e06">Contact doctor test</a>
		  <br><a href="https://www.halodoc.com/tanya-dokter/cari?query=gene">Contact doctor - gp</a>
		  <br><a href="https://www.halodoc.com/apotikantar">PD home screen</a>
		  <br><a href="https://www.halodoc.com/apotikantar/search?search_keyword=panadaol">Search panadol</a>
		  <br><a href="https://halodoc.onelink.me/P71V/458302a8">Contact doctor - naga</a>
		  <br><a href="https://www.halodoc.com/labs">Labs</a>
		  <br><a href="https://www.halodoc.com/rumah-sakit">Hospital Directories</a>
		  <br><a href="https://www.halodoc.com/rumah-sakit/terdekat">Recommended hospitals</a>
		  <br><a href="https://www.halodoc.com/rumah-sakit/nama/halodoc-jakarta">Hospital details</a>
		  <br><a href="https://www.halodoc.com/cari-dokter/nama/chidambara-m-r">Doctor details</a>
		  <br><br><br><a href="https://play.google.com/store/apps/details?id=com.linkdokter.halodoc.android">Playstore</a>
		  <br><a href="https://web.stage.halodoc.com/subscription/">Gojek</a>
		  <br><a href="https://halodoc-h4c.onelink.me/P71V?pid=test_apotikantar&c=test_apotikantar&af_dp=https%3A%2F%2Fwww.halodoc.com%2Fapotikantar&af_web_dp=http%3A%2F%2Fwww.halodoc.com&is_retargeting=true">External PD</a>
		  <br><a href="https://halodoc-h4c.onelink.me/P71V?pid=test_contactdoctor&c=test_contactdoctor&af_dp=https%3A%2F%2Fwww.halodoc.com%2Fcontactdoctor&af_web_dp=http%3A%2F%2Fwww.halodoc.com&is_retargeting=true">External TC</a>
		  <br><a href="https://halodoc-h4c.onelink.me/P71V?pid=test_labs&c=test_labs&af_dp=https%3A%2F%2Fwww.halodoc.com%2Flabs&af_web_dp=http%3A%2F%2Fwww.halodoc.com&is_retargeting=true">External Labs</a>
		  <br><a href="intent://scan/#Intent;scheme=halodoc;package=com.linkdokter.halodoc.android;end"> Take a QR code </a>
		  <br><a href="https://shorturl.at/hjNU0">Short URL</a>
		  <br><a href="https://bit.ly/3bcnxGV">High Risk</a>
		  <br><a href="https://web.stage.halodoc.com/tanya-dokter/cari?query=covid-19">Tanya dokter</a>
		  <br><a href="https://bit.ly/33xOpi4">Mid risk</a>
		  <button onclick="alertBox()">Try it</button>
	    <script type="text/javascript">
	    function alertBox(){
	    	alert("I am alert box");
	    }	
	</script>
	<script type="text/javascript">
	    function showAndroidToast() {
	    	alert("showAndroidToast");
	    	let request = {
   							"request_id":"1234",
   							"request_body":{
      						"request_code" : "user_profile.get_info",
      						"data": {
      							      					}
   			},
   			"callback":"userProfileCallback" //Callback code, where the response comes in
		}
	    	var profileRequest = JSON.stringify(request)
	    	console.log(profileRequest);
	    	// alert(profileRequest);
	        JSToNativeBridge.callToNative(profileRequest);
	    }
	</script>
	<script type="text/javascript">
 function userProfileCallback(response) {
            console.log(JSON.stringify(response));
            try {
                var jsonResponse = null;
                if (typeof response === 'string') {
                    jsonResponse = JSON.parse(response);
                } else {
                    jsonResponse = response;
                }

                var profileResponse = {};
                if (jsonResponse && jsonResponse.status && jsonResponse.status.toLowerCase() === 'success') {
                    profileResponse['status'] = jsonResponse.status;
                    var profileData = jsonResponse && jsonResponse.response_body && jsonResponse.response_body.data && jsonResponse.response_body.data.profile || null;
                    if (profileData) {
                        profileResponse['data'] = profileData;
                        userProfile = profileResponse;
                    }
                }
                if (jsonResponse && jsonResponse.status && jsonResponse.status.toLowerCase() === 'failure') {
                    profileResponse['status'] = jsonResponse.status;
                    var errorResponse = jsonResponse && jsonResponse.error || null;
                    if (errorResponse) {
                        profileResponse['error'] = errorResponse;
                        userProfile = null;
                    }
                }
                if (jsonResponse && jsonResponse.request_id && requestHistory[jsonResponse.request_id]) {
                    requestHistory[jsonResponse.request_id](profileResponse);
                }
            } catch (error) {
                userProfile = null;
            }
            alert('userProfileCallback:' + JSON.stringify(profileResponse));
        }

	    function JSMethodToSendResponse(response){
	    	let json = JSON.stringify(response)
	    	alert(json);
	    }
		</script>
		
		<input type="button" value="Click me!" onclick="showAndroidToast()" />
		
		</body>
</html>
